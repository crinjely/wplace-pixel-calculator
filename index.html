<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>wPlace Pixel Full Timer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #050816;
      color: #e5e7eb;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .card {
      background: rgba(15, 23, 42, 0.96);
      border-radius: 18px;
      padding: 24px 20px;
      max-width: 420px;
      width: 100%;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(148, 163, 184, 0.3);
    }

    h1 {
      font-size: 1.4rem;
      margin: 0 0 8px;
      text-align: center;
    }

    .subtitle {
      font-size: 0.85rem;
      color: #9ca3af;
      text-align: center;
      margin-bottom: 18px;
    }

    label {
      display: block;
      font-size: 0.85rem;
      margin-bottom: 4px;
      color: #cbd5f5;
    }

    input {
      width: 100%;
      padding: 8px 10px;
      margin-bottom: 14px;
      border-radius: 10px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      font-size: 0.9rem;
      outline: none;
      box-sizing: border-box;
    }

    input:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.5);
    }

    button {
      width: 100%;
      padding: 10px 14px;
      border: none;
      border-radius: 999px;
      background: linear-gradient(135deg, #22d3ee, #6366f1);
      color: white;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      margin-top: 4px;
    }

    button:hover {
      opacity: 0.95;
      transform: translateY(-1px);
    }

    button:active {
      opacity: 0.9;
      transform: translateY(0);
    }

    .result {
      margin-top: 16px;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
      font-size: 0.9rem;
      line-height: 1.4;
    }

    .result-line {
      margin: 2px 0;
    }

    .result-label {
      font-weight: 600;
      color: #bfdbfe;
    }

    .error {
      margin-top: 10px;
      padding: 8px 10px;
      background: rgba(248, 113, 113, 0.08);
      border-radius: 10px;
      border: 1px solid rgba(248, 113, 113, 0.4);
      color: #fecaca;
      font-size: 0.85rem;
    }

    .footer {
      margin-top: 10px;
      font-size: 0.75rem;
      color: #6b7280;
      text-align: center;
    }

    .footer code {
      font-size: 0.75rem;
      background: #020617;
      padding: 2px 5px;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>wPlace Pixel Timer</h1>
    <div class="subtitle">
      See when your pixels will be fully regenerated.
    </div>

    <div>
      <label for="maxPixels">Max pixels</label>
      <input id="maxPixels" type="number" min="0" step="1" placeholder="e.g. 3034" />

      <label for="currentPixels">Current pixels</label>
      <input id="currentPixels" type="number" min="0" step="1" placeholder="e.g. 500" />
    </div>

    <button id="calculateBtn">Calculate full time</button>

    <div id="error" class="error" style="display:none;"></div>

    <div id="result" class="result" style="display:none;">
      <div class="result-line"><span class="result-label">Now:</span> <span id="nowTime"></span></div>
      <div class="result-line"><span class="result-label">Full at:</span> <span id="fullTime"></span></div>
      <div class="result-line"><span class="result-label">Time until full:</span> <span id="timeRemaining"></span></div>
      <div class="result-line"><span class="result-label">Minutes needed:</span> <span id="minutesNeeded"></span></div>
    </div>

    <div class="footer">
      Regen rate: <code id="rateDisplay"></code> pixels/min.<br />
      (You can change it in the code if your game uses a different rate.)
    </div>
  </div>

  <script>
    // ðŸ‘‰ CHANGE THIS IF YOUR GAME USES A DIFFERENT RATE
    const PIXELS_PER_MINUTE = 2;

    const maxPixelsInput = document.getElementById('maxPixels');
    const currentPixelsInput = document.getElementById('currentPixels');
    const calculateBtn = document.getElementById('calculateBtn');
    const errorBox = document.getElementById('error');
    const resultBox = document.getElementById('result');
    const nowTimeSpan = document.getElementById('nowTime');
    const fullTimeSpan = document.getElementById('fullTime');
    const timeRemainingSpan = document.getElementById('timeRemaining');
    const minutesNeededSpan = document.getElementById('minutesNeeded');
    const rateDisplay = document.getElementById('rateDisplay');

    rateDisplay.textContent = PIXELS_PER_MINUTE;

    function formatDateTime(date) {
      // Uses your local timezone + format
      return date.toLocaleString(undefined, {
        weekday: 'short',
        year: 'numeric',
        month: 'short',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
    }

    function formatDuration(totalMinutes) {
      const minutes = Math.round(totalMinutes);
      if (minutes <= 0) return '0 minutes';

      const days = Math.floor(minutes / (60 * 24));
      const hours = Math.floor((minutes % (60 * 24)) / 60);
      const mins = minutes % 60;

      const parts = [];
      if (days > 0) parts.push(days + ' day' + (days !== 1 ? 's' : ''));
      if (hours > 0) parts.push(hours + ' hour' + (hours !== 1 ? 's' : ''));
      if (mins > 0) parts.push(mins + ' minute' + (mins !== 1 ? 's' : ''));

      return parts.join(', ');
    }

    function showError(message) {
      errorBox.textContent = message;
      errorBox.style.display = 'block';
      resultBox.style.display = 'none';
    }

    function clearError() {
      errorBox.style.display = 'none';
      errorBox.textContent = '';
    }

    calculateBtn.addEventListener('click', () => {
      clearError();

      const maxPixels = Number(maxPixelsInput.value);
      const currentPixels = Number(currentPixelsInput.value);

      if (isNaN(maxPixels) || isNaN(currentPixels)) {
        showError('Please enter numbers for both fields.');
        return;
      }

      if (maxPixels <= 0) {
        showError('Max pixels must be greater than 0.');
        return;
      }

      if (currentPixels < 0) {
        showError('Current pixels cannot be negative.');
        return;
      }

      if (currentPixels > maxPixels) {
        showError('Current pixels cannot be greater than max pixels.');
        return;
      }

      const missingPixels = maxPixels - currentPixels;
      const now = new Date();

      // Already full
      if (missingPixels === 0) {
        nowTimeSpan.textContent = formatDateTime(now);
        fullTimeSpan.textContent = 'You are already full!';
        timeRemainingSpan.textContent = '0 minutes';
        minutesNeededSpan.textContent = '0';
        resultBox.style.display = 'block';
        return;
      }

      const minutesNeeded = missingPixels / PIXELS_PER_MINUTE;
      const msToAdd = minutesNeeded * 60 * 1000;
      const fullDate = new Date(now.getTime() + msToAdd);

      nowTimeSpan.textContent = formatDateTime(now);
      fullTimeSpan.textContent = formatDateTime(fullDate);
      timeRemainingSpan.textContent = formatDuration(minutesNeeded);
      minutesNeededSpan.textContent = minutesNeeded.toFixed(2);

      resultBox.style.display = 'block';
    });
  </script>
</body>
</html>
